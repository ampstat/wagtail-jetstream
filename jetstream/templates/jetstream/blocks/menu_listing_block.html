{% load wagtailimages_tags jetstream_tags %}

<div class="menu-listing
  {% if self.color.text_color %}text-color-{{ self.color.text_color }}{% endif %}
  {% if self.color.background_color and not self.color.background_image %}bg-color bg-color-{{ self.color.background_color }}{% endif %}
  {% if self.fixed_dimensions.use %}fixed{% endif %}
  {% if self.color.background_image %}bgimage{% endif %}
"
  {% if self.fixed_dimensions %}
    style="height: {{ self.fixed_dimensions.height }}px; width: {{ self.fixed_dimensions.width }}px"
  {% endif %}
>
{% if self.title %}
  <h2>{{ self.title }}</h2>
{% endif %}
  {% if self.show == 'children' %}
    {% page_descendants page as pages %}
  {% else %}
    {% page_siblings page as pages %}
  {% endif %}
  <div class="list-group">
    {% for p in pages %}
      <a href="{{ p.full_url }}" class="page-listing list-group-item {% if page.full_url == p.full_url %}active{% endif %}">
        {{ p.title }}
      </a>
    {% endfor %}
  {% if self.color.background_image %}
    <div class="background-image-container">
      {% image self.color.background_image original class="background-image" %}
    </div>
  {% endif %}
  </div>
</div>
