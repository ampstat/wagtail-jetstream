{% load jetstream_tags %}

<div class="media image-panel-listing {{ extra_classes }}">
{% if extra_classes == "left" %}
  <div class="media-left image-panel-listing--left">
    {% link_url self.link as link_url %}
    {% if link_url %}
      <a href="{{ link_url}}">
        {% arbitrary_image self.image 'fill' self.fixed_dimensions.width self.fixed_dimensions.height %}
      </a>
    {% else %}
      {% arbitrary_image self.image 'fill' self.fixed_dimensions.width self.fixed_dimensions.height %}
    {% endif %}
    {% if self.display_caption %}
      {% include 'jetstream/image_details.html' with image=self.image parent_block="image-panel-listing" %}
    {% endif %}
  </div>
{% endif %}
  <div class="media-body image-panel-listing__body">
    <h4 class="media-heading image-panel-listing__heading">
      {% link_url self.link as link_url %}
      {% if link_url %}
        <a href="{{ link_url }}">{{ self.title }}</a>
      {% else %}
        {{ self.title }}
      {% endif %}
    </h4>
    {{ self.desc }}
  </div>
{% if extra_classes == "right" %}
  <div class="media-right image-panel-listing--right">
    {% link_url self.link as link_url %}
    {% if link_url %}
      <a href="{{ link_url}}">
        {% arbitrary_image self.image 'fill' self.fixed_dimensions.width self.fixed_dimensions.height %}
      </a>
    {% else %}
      {% arbitrary_image self.image 'fill' self.fixed_dimensions.width self.fixed_dimensions.height %}
    {% endif %}
    {% if self.display_caption %}
      {% include 'jetstream/image_details.html' with image=self.image parent_block="image-panel-listing" %}
    {% endif %}
  </div>
{% endif %}
</div>
